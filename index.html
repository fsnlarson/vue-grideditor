<!DOCTYPE html>
<html>
<head>
	<title>Grid Editor</title>
	<link rel="stylesheet" href="bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="grid.css" />
	<script type="text/javascript" src="vue.js"></script>
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.3/vue.js"></script> -->
</head>
<body>
<div class="wrapper">
<script type="text/javascript">
var cols = [
		// {m:'id',show:true,w:'10',noneditable:true},
		{m:'name',namespace:"Name",show:true,w:'40',new:true},
		{m:'knownfor',namespace:"Known For",show:true,w:'30',new:true},
		{m:'year',namespace:"Graduation Year",show:true,w:'20'},
		{m:'degree',namespace:"Degree",show:true,w:'20'},
		{m:'specialization',namespace:"Specialization",show:true,w:'20'},
	];
</script>
<section id="gridtable" class="container gridtable">
	<datagrid :rows="rows" :cols="cols"></datagrid>
	<!-- <pre>{{ $data }}</pre> -->
	<button class="pull-right btn btn-xs " @click="removeAll">
		Clear all
	</button>
</section>
</div>
<div></div>

<!-- Data Grid Template -->
<template id="datagrid-template">
	<div>
		<div class="row">
			<div class="col-sm-6">
				{{ totalrows}} rows |
				E: {{ editcell }} |
				C: {{ cursorcell }}
			</div>
			<div class="col-sm-6">
				{{totalcols }} cols:
				<label v-for="col in cols" class="checkbox-inline"><input type="checkbox" v-model="col.show">{{col.m}}</label>
			</div>
		</div>
		<header class="row">
			<addrow cellindex="-1,-1"/></addrow>
		</header>
		<div v-for="(row,rowIndex) in rows" class="row">
			<datacell v-for="(c,colIndex) in cols"
				v-model="row[c.m]"
				:cellname="c.m"
				:widthclass="colwidths[colIndex]"
				:noneditable="c.noedit"
				:cellindex="rowIndex+','+colIndex"
				v-if="c.show"
			></datacell>
		</div>
	</div>
</template>

<!-- Data Cell template -->
<template id="datacell-template">
<div :class="[widthclass,'datacell',{'editing':editing},{'cursor':cursor}]">
	<div class="datatext" v-text="value"
		v-show="!editing"
	@click="$parent.moveCursor(cellindex)"
	@dblclick="editCell($event)"></div>
	<div class="dataedit" v-if="editing">
		<input type="text"
			:value="value"
			:name="cellname"
			v-focus="true"
			@blur="doneEdit($event.target.value,$event)"
			@keyup.enter="doneEdit($event.target.value,$event)"
			@keyup.esc="cancelEdit($event.target.value,$event)"
		 />
	</div>
</div>
</template>

<!-- Data Cell template -->
<template id="addrow-template">
<div :class="['datacell',{'editing':editing},{'cursor':cursor}]">
	<div class="datatext" v-text="'+ Add Row'"
		v-show="!editing"
		@click="editCell($event)"></div>
	<form method="post" @submit="addRow($event)" @reset="reset($event)" v-if="editing" >
	<div class="row">
		<div v-for="(c,colIndex) in $parent.cols"
				:class="$parent.colwidths[colIndex]"
				v-if="c.new"
		>
			<input type="text"
				:name="c.m"
				:placeholder="c.namespace"
				v-model="newrow[c.m]"
				v-focus="!colIndex"
			/>
		</div>
		<div class="col-sm-2">
			<input type="submit" name="submit" value="Submit" class="btn btn-xs">
		</div>
		<div class="col-sm-2">
			<input type="reset" name="reset" value="Cancel" class="btn btn-xs">
		</div>
	</div>
	</form>
</div>
</template>

<!-- OLD TEMPLATES -->

<template id="datagrid-template-old">
	<div>
		<header class="row">
			<div class="col-sm-12 datacell"><div class="datainput">

			</div></div>
		</header>
	</div>
</template>

<script type="text/javascript" src="grid.js"></script>
</body>
</html>